<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    .dashboard-wrapper { max-width: 1200px; margin: 20px auto; padding: 20px; background: white; border-radius: 12px; }
    .dashboard-header { text-align: center; margin-bottom: 30px; }
    .dashboard-header h1 { color: #333; font-size: 2.2em; margin-bottom: 5px; }
    .dashboard-header p { color: #666; }
    .logout-btn { display: inline-block; margin-top: 10px; padding: 10px 20px; background: #667eea; color: white; border-radius: 8px; text-decoration: none; font-weight: 600; border: none; cursor: pointer; }
    .logout-btn:hover { background: #5a6bd6; }
    .section { background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 30px; }
    .section h2 { color: #333; font-size: 1.6em; margin-bottom: 20px; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; color: #333; font-weight: 600; margin-bottom: 5px; }
    .form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 1em; }
    .form-group input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 5px rgba(102,126,234,0.3); }
    .btn-submit { padding: 10px 25px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: 0.3s ease; }
    .btn-submit:hover { background: #5a6bd6; }
    .accounts-list { margin-top: 20px; }
    .account-item { background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid #667eea; }
    .account-email { color: #333; font-weight: 600; }
    .account-name { color: #666; font-size: 0.9em; }
    .btn-delete { padding: 5px 12px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85em; }
    .btn-delete:hover { background: #c82333; }
    .message { padding: 12px 15px; border-radius: 6px; margin-bottom: 15px; }
    .message.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .message.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
    @media (max-width: 768px) { .two-col { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="dashboard-wrapper">
    <div class="dashboard-header">
      <h1>Admin Dashboard</h1>
      <p>Manage Admin & College Accounts</p>
      <form action="/admin/logout" method="POST" style="display: inline;">
        <button type="submit" class="logout-btn">Logout</button>
      </form>
    </div>

    <% if (successMessage) { %>
      <div class="message success"><%= successMessage %></div>
    <% } %>
    <% if (errorMessage) { %>
      <div class="message error"><%= errorMessage %></div>
    <% } %>

    <div class="two-col">
      <!-- Add Admin Section -->
      <div class="section">
        <h2>Add New Admin</h2>
        <form action="/admin/dashboard/add-admin" method="POST">
          <div class="form-group">
            <label>Admin Email</label>
            <input type="email" name="email" placeholder="admin@example.com" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" name="password" placeholder="Enter password" required>
          </div>
          <button type="submit" class="btn-submit">Add Admin</button>
        </form>

        <div class="accounts-list">
          <h3 style="color: #333; margin-top: 25px; margin-bottom: 10px;">Existing Admins</h3>
          <% if (admins && admins.length > 0) { %>
            <% admins.forEach(admin => { %>
              <div class="account-item">
                <div>
                  <div class="account-email"><%= admin.email %></div>
                </div>
                <form action="/admin/dashboard/delete-admin" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure?');">
                  <input type="hidden" name="adminId" value="<%= admin._id %>">
                  <button type="submit" class="btn-delete">Delete</button>
                </form>
              </div>
            <% }); %>
          <% } else { %>
            <p style="color: #999;">No admins yet</p>
          <% } %>
        </div>
      </div>

      <!-- Add College Section -->
      <div class="section">
        <h2>Add New College</h2>
        <form action="/admin/dashboard/add-college" method="POST">
          <div class="form-group">
            <label>College Name</label>
            <input type="text" name="collegeName" placeholder="College Name" required>
          </div>
          <div class="form-group">
            <label>College Email</label>
            <input type="email" name="email" placeholder="college@example.com" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" name="password" placeholder="Enter password" required>
          </div>
          <button type="submit" class="btn-submit">Add College</button>
        </form>

        <div class="accounts-list">
          <h3 style="color: #333; margin-top: 25px; margin-bottom: 10px;">Existing Colleges</h3>
          <% if (colleges && colleges.length > 0) { %>
            <% colleges.forEach(college => { %>
              <div class="account-item">
                <div>
                  <div class="account-email"><%= college.email %></div>
                  <div class="account-name"><%= college.collegeName %></div>
                </div>
                <form action="/admin/dashboard/delete-college" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure?');">
                  <input type="hidden" name="collegeId" value="<%= college._id %>">
                  <button type="submit" class="btn-delete">Delete</button>
                </form>
              </div>
            <% }); %>
          <% } else { %>
            <p style="color: #999;">No colleges yet</p>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
